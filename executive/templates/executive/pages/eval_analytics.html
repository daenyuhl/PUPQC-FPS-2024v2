{% extends 'base.html' %}
{% load static %}
{% block content %}
{% comment %} <style>
    .gridjs-tbody, td.gridjs-td,
    .gridjs *, .gridjs ::after, .gridjs ::before,
    .table {
        font-size: var(--vz-body-font-size);
    }

    .bg-primary-subtle {
        background-color: #660000 !important;
        opacity: .9 !important;
    }   
</style> {% endcomment %}

<div class="row">
    <div class="col-lg-12">
        <div class="card mt-n4 mx-n4">
            <div class="bg-primary-subtle">
                <div class="card-body px-4 pb-4">
                    <div class="row mb-3">
                        <div class="col-md">
                            <div class="row align-items-center g-3">
                                <div class="col-md-auto">
                                    <div class="avatar-md">
                                        <div class="avatar-title bg-transparent">
                                            <i class="ri-chat-smile-3-line" style="font-size: 3rem !important;"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md">
                                    <div>
                                            <h4 class="fw-bold text-white">Teaching Effectiveness</h4>
                                        <div class="hstack gap-3 flex-wrap text-white">
                                            <div id="evalBreadtime"><i class="ri-map-pin-2-line align-bottom me-1"></i></div>
                                            <div class="vr"></div>
                                            <div>Post Date : <span id="evalBreaddate"></span></div>
                                            <div class="vr"></div>
                                            <div>Your Designation: <div class="badge rounded-pill bg-secondary fs-12">Academic Head</div></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end card body -->
            </div>
        </div>
        <!-- end card -->
    </div>
    <!--end col-->
</div>

<div class="row mt-n5">
    <div class="col-lg-9">
        <div class="card card-height-100">
            <div class="card-header border-0 align-items-center d-flex">
                <h4 class="card-title mb-0 flex-grow-1">Faculty Evaluation Average Ratings</h4>
                <div>
                    <button type="button" class="btn btn-soft-secondary btn-sm shadow-none">
                        2019
                    </button>
                    <button type="button" class="btn btn-soft-secondary btn-sm shadow-none">
                        2020
                    </button>
                    <button type="button" class="btn btn-soft-secondary btn-sm shadow-none">
                        2021
                    </button>
                    <button type="button" class="btn btn-soft-secondary btn-sm shadow-none">
                        2022
                    </button>
                    <button type="button" class="btn btn-soft-secondary btn-sm shadow-none">
                        2023
                    </button>
                    <button type="button" class="btn btn-soft-primary btn-sm shadow-none">
                        2024
                    </button>
                </div>
            </div>
            <div class="card-body p-0 pb-2">
                <div class="w-100">
                    <div class="card-header p-0 border-0 bg-light-subtle">
                        <div class="row g-0 text-center">
                            <div class="col-6 col-sm">
                                <div class="p-3 border border-dashed border-start-0">
                                    <h5 class="mb-1 fs-17 fw-semibold text-info"><span class="counter-value" data-target="98" >0</span>%</h5>
                                    <p class="text-muted mb-0">Average Institutional Rate</p>
                                </div>
                            </div>
                            <div class="col-6 col-sm-3">
                                <div class="p-3 border border-dashed border-start-0">
                                    <h5 class="mb-1 fs-17 fw-semibold text-primary"><span id="frfs">0</span>%</h5>
                                    <p class="text-muted mb-0">Faculty Rating: First Semester</p>
                                </div>
                            </div>
                            <div class="col-6 col-sm">
                                <div class="p-3 border border-dashed border-start-0">
                                    <h5 class="mb-1 fs-17 fw-semibold text-secondary"><span id="frss">0</span>%</h5>
                                    <p class="text-muted mb-0">Faculty Rating: Second Semester</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body p-0 pb-2">
                        <div class="w-100">
                            <div id="line-chart-two"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-3">
        <div class="card card-height-100">
            <div class="card-header align-items-center d-flex">
                <h4 class="table-h4-white-text card-title mb-0 flex-grow-1">
                    Average Student Scores for Each Faculty
                </h4>
            </div>
            <div class="card-body p-0 pb-2">
                <div class="card-body">
                    <div id="prjects-status-1" class="apex-charts mt-5" dir="ltr"></div>
                    <div class="mt-3">
                        <div class="d-flex justify-content-center align-items-center mb-4">
                            <h2 class="me-3 ff-secondary mb-0 text-warning"><span id="rb3">0</span></h2>
                            <div>
                                <p class="mb-0 text-warning">Least Rated Faculties</p>
                                <p class="text-success fw-medium mb-0">
                                    <span class="badge bg-success-subtle text-success p-1 rounded-circle">
                                        <i class="ri-arrow-right-up-line"></i>
                                    </span> <span id="ra3"></span> Highest Rated Faculties
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="card card-height-100">
            <div class="card-header align-items-center d-flex">
                <h4 class="table-h4-white-text card-title mb-0 flex-grow-1">Trends in Teaching Effectiveness Over Time</h4>
            </div>
            <div class="card-body p-0 pb-2">
                <div class="w-100">
                    <div class="card-header p-0 border-0 bg-light-subtle">
                        <div class="row g-0 text-center">
                            <div class="col-6">
                                <div class="p-3 border border-dashed border-start-0">
                                    <h5 class="mb-1 fs-17 fw-semibold text-primary"><span id="#">0</span></h5>
                                    <p class="text-muted mb-0">Most Performing Year</p>
                                </div>
                            </div>
                            <div class="col-6 col-sm">
                                <div class="p-3 border border-dashed border-start-0">
                                    <h5 class="mb-1 fs-17 fw-semibold text-warning"><span id="#">0</span></h5>
                                    <p class="text-warning mb-0">Least Performing Year</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body p-0 pb-2">
                        <div class="w-100">
                            <div id="chartz"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% comment %} <div class="col-xxl-9">
        <div class="card card-height-100">
            <div class="card-header align-items-center d-flex">
                <h4 class="table-h4-white-text card-title mb-0 flex-grow-1">
                    Faculty Ratings
                </h4>
            </div>
            <div class="card-body p-0 pb-2">
                <div class="w-100">
                    <div id="line-chart"></div>
                </div>
            </div>
        </div>
    </div> {% endcomment %}
</div>


<script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
<script src="{% static 'js/main/eval_upload/eval_u_datentime.js' %}"></script>

<script>
    // Faculty Performance vs. Institutional Requirement Percentage
    const json_data = JSON.parse('{{ overall_avg_data|escapejs }}');
</script>

<script>
    // Faculty Performance vs. Institutional Requirement
    var chartDataTwo = JSON.parse('{{ chart_data_two|escapejs|safe }}');
</script>

<script>
    // Trends in Teaching Effectiveness Over Time
    var combinedData = JSON.parse('{{ combined_data|safe }}');
</script>

<script>
    // Average Student Scores for Each Faculty 
    var percentage_data = JSON.parse('{{ percentage|safe }}');
</script>

<script>
    // Average Student Scores for Each Faculty: Count
    const percentaging = JSON.parse('{{ percentage|escapejs }}');
</script>

<script src="{% static 'js/main/eval_analytics/eval_analytics.js' %}"></script>
{% endblock %}